import requests
import json

prompt = """
我讲给你一段新闻，请严格按照json格式返回，字段包括发生时间time, 新闻摘要summary, 预测后续发展prediction，内容需为中文。
**新闻原文**
李 대통령 즉각 '긴급 지시'…전 국민 '환호'
박신영 기자 님의 스토리 • 18시간 • 2분 읽음
이재명 대통령이 과거 생리대 가격 문제 제기에 이어 개학을 앞두고 급등한 교복 가격 문제까지 직접 점검하라고 지시하며 국민적 이목이 쏠렸다. 최근 보고에서 교복 구입비가 60만 원에 육박하는 것으로 나타나자, 대통령은 생산 구조 개선과 국산 소재 활용 등 실질적 대책 마련을 주문했다.

12일 이 대통령은 청와대에서 열린 수석·보좌관 회의를 주재하며 교복 가격을 언급했다. 그는 “개학을 앞두고 있는 만큼 교복 가격 적정성 문제를 한 번 살펴봐 달라”고 말했다. 이어 “최근 교복 구입비가 60만 원에 육박한다고 한다”라고 밝혔다.

이 대통령은 과거와 비교해 가격 상승 폭이 크다고 지적했다. 그는 “제가 시장할 때는 (교복 구입비가) 30만 원 정도였는데 어느 틈에 60만 원에 육박한다고 한다. 부모님 등골 브레이커라고 얘기한다고도 한다”라며 부담을 언급했다.

또 “대체적으로 해외에서 수입한 것들이 많은데 그걸 그렇게 비싸게 받는 게 온당한지, 만약 문제가 있으면 어떻게 대첵을 세울지 검토해 주길 바란다”라고 촉구했다.

대안으로는 생산 방식 전환을 제시했다. 이 대통령은 “대부분 교복을 무상 지급하는 상황이라 업체에 돈을 대주는 게 아니고 생산 자체를 협동조합 형태로 만들어 국내 일자리도 만들고 가급적 소재도 국산을 사용하게 하면 국내 산업 발전에 도움 되지 않을까 생각해 봤다”라며 “타당성이 있는지 검토해 주길 바란다”라고 말했다.

앞서 지난달 20일 이 대통령은 생리대 가격 문제도 공개적으로 제기한 바 있다. 당시 이 대통령은 국무회의에서 “생리대는 우리나라가 40% 해외 대비 비싼 게 사실인가 본데 싼 것도 만들어서 팔아야 가난한 사람도 쓸 것 아니냐”라고 피력했다. 그는 “아예 위탁생산 해서 무상 공급하는 것을 검토해 달라”고 주문했다.

이 대통령은 “(생리대가) 고급화해서 비싸다고 주장한다면서요”라며 “(그렇다면) 싼 건 왜 생산을 안 하나. 기본적인 품질을 잘 갖춘 것을 써야 한다”라고 지적했다. 또 “지금은 너무 부담이 크고 정부에서 지원해 주면 속된 말로 바가지를 씌우는 데 돈만 주는 꼴”이라며 “아주 기본적이고 필요한, 품질을 갖춘 생리대를 싸게 만들어서 무상 공급하는 것을 연구해 볼 생각”이라고 밝혔다.

이번 지시는 생리대에 이어 교복까지 생활 밀착형 민생 문제를 직접 챙기겠다는 대통령의 의지를 보여준다. 대통령이 생산 구조 개선, 국산 소재 활용 등 구체적 대책 마련까지 주문하면서 정부 차원의 실질적 대응과 정책 실행 여부가 주목된다. 향후 학부모 부담 완화와 국내 산업 지원까지 연결될 수 있는 방안이 어떻게 구체화될지도 관심이 쏠린다.
"""

url = "http://localhost:1314/api/v3/bots/chat/completions"
headers = {"Content-Type": "application/json"}
data = {
    "messages": [{"role": "user", "content": prompt}],
    "stream": True,  # 启用流式响应
}

print(f"Sending request to {url}...")
try:
    response = requests.post(url, json=data, headers=headers, stream=True)
    response.raise_for_status()

    print("Response stream:")
    for line in response.iter_lines():
        if line:
            decoded_line = line.decode("utf-8")
            if decoded_line.startswith("data:"):
                json_str = decoded_line[5:]
                if json_str != "[DONE]":
                    delta = json.loads(decoded_line[5:])["choices"][0]["delta"][
                        "content"
                    ]
                    print(delta, end="")
except Exception as e:
    print(f"Error: {e}")
